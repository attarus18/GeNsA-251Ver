<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generatore di Citazioni Ispiratrici</title>
    <!-- Carica Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117;
            min-height: 100vh;
            padding: 0;
            color: #ffffff;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .quote-card {
            background-color: #161b22;
            border: 1px solid #30363d;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            width: 100vw;
            min-height: 100vh;
            max-width: 100vw;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding-top: 6vw;
            padding-bottom: 6vw;
            padding-left: 6vw;
            padding-right: 6vw;
            box-sizing: border-box;
        }
        @media (min-width: 640px) {
            .quote-card {
                max-width: 470px;
                min-height: auto;
                width: 95%;
                margin: auto;
                padding: 2rem;
            }
        }
        .generate-btn {
            background: linear-gradient(90deg, #4c51bf, #6b46c1);
            transition: all 0.3s ease;
            transform: scale(1);
            font-size: 1.18rem;
        }
        .generate-btn:hover {
            box-shadow: 0 4px 15px rgba(107, 70, 193, 0.6);
            transform: scale(1.03);
        }
        .copy-btn {
            transition: background-color 0.2s, color 0.2s;
        }
        .copy-btn:hover {
            background-color: #38a169;
            color: #fff;
        }
        .fade-in {
            opacity: 0;
            animation: fadeIn 0.5s ease-in-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        #notification {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            padding: 18px 30px;
            background-color: #38a169;
            color: white;
            border-radius: 9999px;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            z-index: 1000;
            font-size: 1.18rem;
        }
    </style>
</head>
<body>

<div id="app" class="quote-card flex flex-col items-center text-center">
    <h1 class="text-3xl sm:text-4xl font-extrabold mb-8 mt-2 text-indigo-400">Generatore di Saggezza</h1>
    <div class="w-20 h-20 sm:w-16 sm:h-16 bg-gray-700 rounded-full flex items-center justify-center mb-7 mx-auto">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10 text-indigo-300" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 1L2 12l10 10l10-10L12 1zm0 14.828L5.172 9.001 12 2.172l6.828 6.829L12 15.828z"/>
        </svg>
    </div>
    <blockquote class="text-gray-300 italic text-[1.6rem] sm:text-2xl mb-7">
        <span id="quote-text" class="font-light fade-in">Tocca per scoprire la tua ispirazione quotidiana.</span>
    </blockquote>
    <p id="quote-author" class="text-lg sm:text-xl font-medium text-indigo-400 mb-8">— Autore Sconosciuto</p>
    <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full justify-center">
        <button id="generate-button" class="generate-btn text-white font-semibold py-4 px-8 rounded-full shadow-md w-full sm:w-auto text-lg">
            Nuova Citazione
        </button>
        <button id="copy-button" class="copy-btn bg-gray-700 text-gray-300 font-semibold py-4 px-8 rounded-full shadow-md flex items-center justify-center w-full sm:w-auto text-lg" disabled>
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 mr-2" viewBox="0 0 24 24" fill="currentColor">
                <path d="M16 1H4C2.895 1 2 1.895 2 3v14h2V3h12V1zm5 4H8C6.895 5 6 5.895 6 7v14c0 1.105.895 2 2 2h13c1.105 0 2-.895 2-2V7c0-1.105-.895-2-2-2zm0 16H8V7h13v14z"/>
            </svg>
            Copia
        </button>
    </div>
</div>

<div id="notification" class="hidden">Citazione copiata!</div>

<script src="quotes.js"></script>
<script>
    const quoteTextElement = document.getElementById('quote-text');
    const quoteAuthorElement = document.getElementById('quote-author');
    const generateButton = document.getElementById('generate-button');
    const copyButton = document.getElementById('copy-button');
    const notification = document.getElementById('notification');
    let lastIndex = -1;
    let currentQuote = "";

    function displayRandomQuote() {
        quoteTextElement.classList.remove('fade-in');
        setTimeout(() => {
            if (!quotes || quotes.length === 0) {
                quoteTextElement.textContent = "Errore: Dati citazioni non caricati.";
                quoteAuthorElement.textContent = "— Verifica quotes.js";
                return;
            }
            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * quotes.length);
            } while (randomIndex === lastIndex && quotes.length > 1);
            lastIndex = randomIndex;
            const quote = quotes[randomIndex];
            currentQuote = `${quote.text} — ${quote.author}`;
            quoteTextElement.textContent = quote.text;
            quoteAuthorElement.textContent = `— ${quote.author}`;
            copyButton.disabled = false;
            copyButton.classList.remove('opacity-50', 'cursor-not-allowed');
            quoteTextElement.classList.add('fade-in');
        }, 100);
    }

    function copyQuote() {
        const tempTextArea = document.createElement('textarea');
        tempTextArea.value = currentQuote;
        document.body.appendChild(tempTextArea);
        tempTextArea.select();
        try {
            document.execCommand('copy'); 
            showNotification();
        } catch (err) {
            console.error('Errore nella copia: ', err);
        }
        document.body.removeChild(tempTextArea);
    }

    function showNotification() {
        notification.classList.remove('hidden');
        notification.style.opacity = '1';
        setTimeout(() => {
            notification.style.opacity = '0';
            setTimeout(() => {
                notification.classList.add('hidden');
            }, 300);
        }, 1500);
    }

    generateButton.addEventListener('click', displayRandomQuote);
    copyButton.addEventListener('click', copyQuote);

    window.onload = function() {
        displayRandomQuote();
    };
</script>
</body>
</html>
